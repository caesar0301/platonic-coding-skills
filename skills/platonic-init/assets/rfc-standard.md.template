# RFC Specifications & Management Guide

This document defines the process, conventions, and guidelines for creating and managing RFCs (Requests for Comments) in the {{PROJECT_NAME}} project.

---

## Table of Contents

1. [Overview](#overview)
2. [Spec Kinds](#spec-kinds)
3. [RFC Process](#rfc-process)
4. [Naming Conventions](#naming-conventions)
5. [Status Management](#status-management)
6. [Versioning Rules](#versioning-rules)
7. [RFC Template](#rfc-template)
8. [Best Practices](#best-practices)

---

## Overview

RFCs are the authoritative specifications for the {{PROJECT_NAME}} system. They define:

- Core architectural decisions
- Data models and semantics
- API contracts and interfaces
- System behavior and invariants

RFCs serve as:

- **Design documents** during development
- **Implementation contracts** for engineers
- **Reference documentation** for users
- **Historical record** of design decisions

---

## Spec Kinds

{{PROJECT_NAME}} RFCs fall into three kinds, each with a distinct purpose and level of abstraction:

### Conceptual Design

**Purpose**: Define the system's vision, principles, taxonomy, and invariants.

**Contains**:
- System goals and design philosophy
- Fundamental abstractions and conceptual model
- Core terminology and taxonomy
- System-wide invariants

**Does NOT contain**: Schemas, APIs, code, storage formats, component boundaries.

**When to use**: Starting a new system or subsystem; defining foundational concepts that other specs depend on.

### Architecture Design

**Purpose**: Define components, layers, responsibilities, data flow, and constraints.

**Contains**:
- Component/module structure and responsibilities
- Data flow between components
- Invariants (MUST/MUST NOT rules)
- Abstract schemas and dependency constraints

**Does NOT contain**: Concrete API signatures, language-specific code, implementation details.

**When to use**: Designing system architecture, layer boundaries, storage models, or subsystem structure.

### Implementation Interface Design

**Purpose**: Define API contracts, naming conventions, and interface signatures.

**Contains**:
- Naming patterns and conventions
- Type/struct definitions
- Trait/interface signatures
- Error handling patterns and flow control semantics

**May be language-specific**: Code blocks in the target language are appropriate.

**When to use**: Defining cross-component API contracts, data access patterns, or shared interfaces.

### Dependency Flow Between Kinds

```
Conceptual Design → Architecture Design → Implementation Interface Design
```

Each kind builds on the previous. Conceptual specs typically have no RFC dependencies; architecture specs depend on conceptual; impl-interface specs depend on architecture. This is guidance, not a hard rule.

---

## RFC Process

### When to Create an RFC

Create an RFC when:

- Defining a new subsystem or layer
- Specifying public API contracts
- Establishing semantic guarantees or invariants
- Making cross-cutting architectural decisions
- Proposing significant changes to frozen RFCs

Do NOT create an RFC for:

- Implementation details that don't affect contracts
- Internal optimizations invisible to other layers
- Temporary workarounds or experiments
- Documentation updates without semantic changes

### RFC Lifecycle

```
Draft → Review → Frozen
Frozen → Amendment (creates RFC-NNNN-VVV.md)
```

#### Stage 1: Draft

- RFC is created with `Status: Draft`
- Author iterates on design
- May be edited freely in place
- Incomplete sections are acceptable

#### Stage 2: Review

- Author requests review when RFC is complete
- Core team reviews for completeness, consistency, correctness, clarity

#### Stage 3: Frozen

- RFC is marked `Status: Frozen`
- Becomes immutable production reference
- Any changes require creating a versioned update

---

## Naming Conventions

### Numbered RFCs

**Format**: `RFC-NNNN.md`

- `NNNN`: 4-digit zero-padded number (0001, 0002, etc.)
- Sequential numbering
- Numbers are reserved once assigned

### Special RFCs

**Format**: `rfc-{name}.md`

Used for cross-cutting RFCs: `rfc-namings.md`, `rfc-index.md`, etc.

### Versioned RFC Updates

**Format**: `RFC-NNNN-VVV.md`

- `NNNN`: Original RFC number
- `VVV`: Version number (3-digit padded, starting at 001)
- Used only for updates to frozen RFCs

---

## Status Management

### Status Values

| Status | Meaning | Editable? |
|--------|---------|-----------|
| **Draft** | Work in progress | Yes |
| **Review** | Ready for review | Yes (with feedback) |
| **Frozen** | Immutable production reference | No (create version) |
| **Deprecated** | No longer active | No |

### Changing Status

- **Draft → Review**: Complete the RFC, update status, request review
- **Review → Frozen**: Address feedback, ensure consensus, update status
- **Frozen → Amendment**: Create new file `RFC-NNNN-VVV.md` with full content

---

## Versioning Rules

### For Draft and Review RFCs

- Edit in place
- Update `Last Updated` field when making changes

### For Frozen RFCs

Frozen RFCs are **immutable**. To make updates:

1. Create `RFC-NNNN-VVV.md` (next sequential version)
2. Copy full content from original
3. Make changes
4. Update metadata:

```markdown
# RFC-NNNN-VVV: [Title] (Update [V])

**Status**: Frozen
**Parent RFC**: RFC-NNNN
**Version**: VVV
**Authors**: [Author names]
**Created**: YYYY-MM-DD
**Changes**: [Brief summary]
**Supersedes**: RFC-NNNN or RFC-NNNN-002
**Depends on**: [RFC-XXXX, RFC-YYYY]
```

---

## RFC Template

Use this template when creating new RFCs:

```markdown
# RFC-NNNN: [Title]

**Status**: Draft
**Authors**: [Your name(s)]
**Created**: YYYY-MM-DD
**Last Updated**: YYYY-MM-DD
**Depends on**: [RFC-XXXX, RFC-YYYY, or "---" if none]
**Supersedes**: [RFC-ZZZZ or "---" if none]
**Stage**: [Optional: e.g. Core | Storage | API]
**Kind**: [Conceptual Design | Architecture Design | Implementation Interface Design]

---

## 1. Abstract

[2-4 sentences summarizing what this RFC defines and why it matters]

---

## 2. Scope and Non-Goals

### 2.1 Scope

This RFC defines:
* [What is specified]

### 2.2 Non-Goals

This RFC does **not** define:
* [What is explicitly excluded]

---

## 3. Background & Motivation

[Why is this RFC needed?]

---

## 4. Design Principles

1. **Principle 1**: Description
2. **Principle 2**: Description

---

## 5. [Main Content Sections]

[Organize specification into logical sections]

---

## 6. Examples

[Concrete examples]

---

## 7. Relationship to Other RFCs

* **RFC-XXXX**: [Relationship]

---

## 8. Open Questions

* [Question 1]

---

## 9. Conclusion

[1-2 paragraphs summarizing key takeaways]
```

---

## Best Practices

### Writing Style

1. **Be precise**: Use normative keywords (MUST, SHOULD, MAY) per RFC 2119
2. **Be clear**: Avoid ambiguity; prefer explicit specifications
3. **Be complete**: Cover all relevant cases and edge conditions
4. **Be concise**: Focus on content over verbosity
5. **Use examples**: Illustrate complex concepts concretely

### Structure

- Use consistent heading levels
- Group related concepts together
- Use tables for comparisons and categorization
- Use code blocks for syntax and examples
- Use diagrams (mermaid) for complex relationships

### Dependencies

- Explicitly list all RFC dependencies in metadata
- Reference specific sections when citing other RFCs
- Avoid circular dependencies
- Prefer depending on frozen RFCs over drafts

### Cross-References

- Link to RFCs: `[RFC-NNNN](RFC-NNNN.md)`
- Link to sections: `[RFC-NNNN, Section 4](RFC-NNNN.md#4-design-principles)`
- Link to versions: `[RFC-NNNN-VVV](RFC-NNNN-VVV.md)`

### Terminology Management

The [rfc-namings.md](rfc-namings.md) file **MUST** always reflect the latest terminology from active RFCs.

- **MUST** keep rfc-namings.md synchronized with terminology in active RFCs
- **MUST** update rfc-namings.md when new terms are introduced
- **MUST** remove deprecated terms when RFCs are deprecated

---

## Metadata Fields Reference

### Required Fields (All RFCs)

| Field | Format | Description |
|-------|--------|-------------|
| `Status` | `Draft`, `Review`, `Frozen`, `Deprecated` | Current RFC status |
| `Authors` | Free text | RFC author(s) |
| `Created` | `YYYY-MM-DD` | Date RFC was created |
| `Last Updated` | `YYYY-MM-DD` | Date of most recent change |
| `Depends on` | `RFC-NNNN, RFC-MMMM` or `---` | RFC dependencies |
| `Supersedes` | `RFC-NNNN` or `---` | RFC this replaces |

### Optional Fields

| Field | Format | Description |
|-------|--------|-------------|
| `Stage` | Free text | Development stage or subsystem |
| `Kind` | `Conceptual Design`, `Architecture Design`, `Implementation Interface Design` | Spec kind |

### Additional Fields (Versioned RFCs Only)

| Field | Format | Description |
|-------|--------|-------------|
| `Parent RFC` | `RFC-NNNN` | Original RFC being updated |
| `Version` | `VVV` | Version number (001, 002, etc.) |
| `Changes` | Free text | Summary of changes |

---

**For questions about RFC management, contact the {{PROJECT_NAME}} core team.**
